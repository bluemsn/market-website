

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="renderer" content="webkit" />
  <title>Weex第三方组件平台</title>
</head>
<body>
  <div id="header"></div>
  <div id="body">
      <div id = "list"></div>
      <div id = "detail"></div>

  </div>
  <div id="footer"></div>


  <script src="http://cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://unpkg.com/vue@2.1.6/dist/vue.js"></script>
  <script src="http://weex-market.taobao.net/ext/js/showdown.min.js"></script>
  <script src="http://weex-market.taobao.net/ext/js/base64.min-2.1.9.js"></script>
  <style>
      #body{
        display: flex;
        flex-direction: row;
      }

     #list{
       width: 400px;
     }

    #detail{
      flex: 1;
      width: 800px;
    }


  </style>

<script>
  (function(){
    var getList = function(){
      var url = "http://weex-market.taobao.net/json/weexExt/list.jsonp?callback=?"
      $.getJSON(url, function(result){
        var data = result.data;
        var html = ""
        for(var i=0;i<data.length;i++){
          html+= '<div><a data-id="'+data[i].id+'">'+data[i].name+'</div></a>'
        }
        $("#list").html(html);
      })
    }



    var getDetail = function(id,callback){
      var url = "http://weex-market.taobao.net/json/weexExt/readme.jsonp?callback=?&id="+id
      $.getJSON(url, function(result){
        callback&&callback(result)
      })
    }

    var toHTML = function(markdown){
      var readme_markdown = Base64.decode(markdown);

      var converter = new showdown.Converter()
      return converter.makeHtml(readme_markdown);
    }


    var renderDetail = function(result){
      $("#detail").html(toHTML(result.data))
    }


    var addEvent = function(){
      $("#list").on("click","a", function(ev){
        var target = $(ev.target);
        var id = target.attr("data-id")
        if(id){
            getDetail(id, function(result){
              renderDetail(result)
            })
        }
      })
    }



    getList()
    addEvent()
  }())


</script>

</body>

</html>